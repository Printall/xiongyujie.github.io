<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"xiongyujie.github.io","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="坚持！坚持！坚持！！！">
<meta property="og:type" content="website">
<meta property="og:title" content="xiongyujie&#39;s blog">
<meta property="og:url" content="https://xiongyujie.github.io/index.html">
<meta property="og:site_name" content="xiongyujie&#39;s blog">
<meta property="og:description" content="坚持！坚持！坚持！！！">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="玉杰君">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://xiongyujie.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>xiongyujie's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">xiongyujie's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">学习记录</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-photo">

    <a href="/photo/" rel="section"><i class="fas fa-camera-retro fa-fw"></i>相册</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiongyujie.github.io/2021/07/01/linux%E5%91%BD%E4%BB%A4%E5%AD%A6%E4%B9%A0/02_linux%E7%9A%84%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ava.jpeg">
      <meta itemprop="name" content="玉杰君">
      <meta itemprop="description" content="坚持！坚持！坚持！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiongyujie's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/01/linux%E5%91%BD%E4%BB%A4%E5%AD%A6%E4%B9%A0/02_linux%E7%9A%84%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" class="post-title-link" itemprop="url">linux文件系统</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-07-01 00:00:00" itemprop="dateCreated datePublished" datetime="2021-07-01T00:00:00+08:00">2021-07-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-16 16:42:05" itemprop="dateModified" datetime="2021-07-16T16:42:05+08:00">2021-07-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">文件系统</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2021/07/01/linux%E5%91%BD%E4%BB%A4%E5%AD%A6%E4%B9%A0/02_linux%E7%9A%84%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2021/07/01/linux命令学习/02_linux的文件系统/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="linux的文件属性"><a href="#linux的文件属性" class="headerlink" title="linux的文件属性"></a>linux的文件属性</h4><p>在linux中，使用<code>ls -l</code>查看l文件属性，具体情况如下</p>
<p><img src="https://image-1300045024.cos.ap-nanjing.myqcloud.com/img/20210409202027.png" alt="image-20210409202027261"></p>
<p>第一个字母代表的是文件的属性：</p>
<p>​    l：表示链接文件</p>
<p>​    -：表示为文件</p>
<p>​    d：表示为目录</p>
<p>​    b：表示装置文件里面的可供存储的设备接口</p>
<p>​    c：表示装置文件里面的串行设备</p>
<p>linux文件的权限包括读，写，执行分别用r, w, x表示</p>
<p>有三种模式修改权限分别为：+，-， =</p>
<p>文件权限的十进制表示r,w,x分别为1，2，4</p>
<p>文件的粒度分别为拥有者，组群，其他分别用u, g, o </p>
<p>a代表所有粒度</p>
<h5 id="文件权限管理"><a href="#文件权限管理" class="headerlink" title="文件权限管理"></a>文件权限管理</h5><ul>
<li>chown：改变文件所属用户和组</li>
<li>chmod：修改用户权限</li>
<li>chgrp：更改文件组属性</li>
</ul>
<p><code>chomod [option] [mode] file</code></p>
<p><code>option:</code> </p>
<p>​    <code>-c : 显示更改的部分信息</code></p>
<p>​    <code>-f: 忽略错误符号</code></p>
<p>​    <code>-h: 修复符号链接</code></p>
<p>​    <code>-v: 显示详细的处理信息</code></p>
<pre><code> `-R: 递归修改`
</code></pre>
<p><code>chgrp [-cfhRv] [所属组群] [文件或者目录]</code></p>
<p><code>option：</code></p>
<p>​    <code>-c: 显示更改信息</code></p>
<p>​    <code>-f: 不显示错误信息</code></p>
<p>​    <code>-h: 只对链接的文件修改，不修改其他文件</code></p>
<p>​    <code>-R: 递归处理</code></p>
<p>​    <code>-v: 显示指令执行过程</code></p>
<p><code>chown [-cfhvR] user[:group] file</code></p>
<p>​    <code>-c: 显示更改信息</code></p>
<p>​    <code>-f: 不显示错误信息</code></p>
<p>​    <code>-h: 只对链接的文件修改，不修改其他文件</code></p>
<p>​    <code>-R: 递归处理</code></p>
<p>​    <code>-v: 显示指令执行过程</code></p>
<h6 id="文件目录管理"><a href="#文件目录管理" class="headerlink" title="文件目录管理"></a>文件目录管理</h6><p>常用的处理命令：</p>
<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ls</td>
<td align="center">列出目录名和文件名</td>
</tr>
<tr>
<td align="center">cd</td>
<td align="center">切换目录</td>
</tr>
<tr>
<td align="center">pwd</td>
<td align="center">显示当前目录</td>
</tr>
<tr>
<td align="center">mkdir</td>
<td align="center">创建文件或者吗目录</td>
</tr>
<tr>
<td align="center">rmdir</td>
<td align="center">删除文件或者目录</td>
</tr>
<tr>
<td align="center">cp</td>
<td align="center">复制文件或者目录</td>
</tr>
<tr>
<td align="center">rm</td>
<td align="center">移除文件或者目录</td>
</tr>
<tr>
<td align="center">mv</td>
<td align="center">移除或者移动文件或者目录</td>
</tr>
</tbody></table>
<p>常用命令：</p>
<p><code>ls [option] [目录]</code></p>
<ul>
<li> <code>-a: 列出所有文件，包括隐藏文件</code></li>
<li><code>-d: 列出目录本身，而不是内部数据</code></li>
<li><code>-l: 列出文件或目录的属性</code></li>
</ul>
<p><code>mkdir [option] 目录名称</code></p>
<ul>
<li><code>-m: 配置文目录的权限</code></li>
<li><code>-p: 递归创建</code></li>
</ul>
<p>cp: [option] source destination</p>
<p>-a: 等于-pdr</p>
<p>-d: 复制链接属性</p>
<p>-f: 强制复制</p>
<p>-i: 覆盖询问</p>
<p>-l: 硬链接复制</p>
<p>-p: 复制文件的属性</p>
<p>-r: 递归复制</p>
<p>-s: 复制为软连接</p>
<p>-u: 根据源文件和目标文件的版本复制</p>
<h5 id="linux文件内容查看"><a href="#linux文件内容查看" class="headerlink" title="linux文件内容查看"></a>linux文件内容查看</h5><table>
<thead>
<tr>
<th>命令</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>cat</td>
<td>由第一行开始显示文件内容</td>
</tr>
<tr>
<td>tac</td>
<td>由最后一行显示内容</td>
</tr>
<tr>
<td>nl</td>
<td>显示行号</td>
</tr>
<tr>
<td>more</td>
<td>分页显示内容</td>
</tr>
<tr>
<td>less</td>
<td>和more相同，但是可以向前翻页</td>
</tr>
<tr>
<td>head</td>
<td>只看前几行</td>
</tr>
<tr>
<td>tail</td>
<td>只看后几行</td>
</tr>
</tbody></table>
<p><code>cat [option] file</code> </p>
<ul>
<li><code>-A：=-vET</code></li>
<li><code>-b: 列出行号</code></li>
<li><code>-E: 将结尾断行字节显示</code></li>
<li><code>-n：列出行号，包括空白</code></li>
<li><code>-T: 显示table键，并以^|显示</code></li>
<li><code>-v: 列出特殊字符</code></li>
</ul>
<p><code>nl [option] file</code></p>
<ul>
<li><code>-b：指定行号的输出方式; a包括空行输出;b表示不输出空行行号</code></li>
<li><code>-n：行号的输出位置；ln左边输出行号，rn右边述出行号，rz填充0右边显示</code></li>
<li><code>-w：行号栏占位的位数</code></li>
</ul>
<p><code>more file</code></p>
<ul>
<li><code>空格键：向下翻页</code></li>
<li><code>enter：向下翻一行</code></li>
<li><code>/ ：向下搜索</code></li>
<li><code>:f：显示文档行号，以及当前行号</code></li>
<li><code>q：退出文档</code></li>
<li><code>b：往回翻页</code></li>
</ul>
<p><code>less file</code></p>
<ul>
<li><code>空白键：向下翻页</code></li>
<li><code>pagedown：向下翻页</code></li>
<li><code>pageup：向上翻页</code></li>
<li><code>/：向下搜索</code></li>
<li><code>?：向上搜索</code></li>
<li><code>n：重复前一个搜索</code></li>
<li><code>N：反向(向上或者向下)重复前一个</code></li>
<li><code>q： 退出文档</code></li>
</ul>
<p>head/tail - n ：表示前n行或者后n行显示</p>
<h4 id="linux账号管理"><a href="#linux账号管理" class="headerlink" title="linux账号管理"></a>linux账号管理</h4>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiongyujie.github.io/2021/07/01/%E7%AE%97%E6%B3%95/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ava.jpeg">
      <meta itemprop="name" content="玉杰君">
      <meta itemprop="description" content="坚持！坚持！坚持！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiongyujie's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/01/%E7%AE%97%E6%B3%95/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/" class="post-title-link" itemprop="url">二分查找</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-07-01 00:00:00" itemprop="dateCreated datePublished" datetime="2021-07-01T00:00:00+08:00">2021-07-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-16 16:34:21" itemprop="dateModified" datetime="2021-07-16T16:34:21+08:00">2021-07-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2021/07/01/%E7%AE%97%E6%B3%95/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2021/07/01/算法/二分查找/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiongyujie.github.io/2021/07/01/%E7%AE%97%E6%B3%95/%E5%9B%9E%E6%BA%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ava.jpeg">
      <meta itemprop="name" content="玉杰君">
      <meta itemprop="description" content="坚持！坚持！坚持！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiongyujie's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/01/%E7%AE%97%E6%B3%95/%E5%9B%9E%E6%BA%AF/" class="post-title-link" itemprop="url">回溯算法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-07-01 00:00:00" itemprop="dateCreated datePublished" datetime="2021-07-01T00:00:00+08:00">2021-07-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-16 16:38:38" itemprop="dateModified" datetime="2021-07-16T16:38:38+08:00">2021-07-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2021/07/01/%E7%AE%97%E6%B3%95/%E5%9B%9E%E6%BA%AF/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2021/07/01/算法/回溯/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="回溯算法："><a href="#回溯算法：" class="headerlink" title="回溯算法："></a>回溯算法：</h4><p>回溯算法也叫试探法，它是一种系统地搜索问题的解的方法。回溯法（探索与回溯法）是一种选优搜索法，又称为试探法，按选优条件向前搜索，以达到目标。但当探索到某一步时，发现原先选择并不优或达不到目标，就退回一步重新选择，这种走不通就退回再走的技术为回溯法，而满足回溯条件的某状态的点称为“回溯点”。</p>
<p>回溯算法的基本思想是：从一条路往前走，能进则进，不能进则退回来，换一条路再试。</p>
<p>回溯算法的一般步骤：</p>
<p>1、 针对所给问题，定义问题的解空间，它至少包含问题的一个（最优）解。</p>
<p>2 、确定易于搜索的解空间结构,使得能用<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%9B%9E%E6%BA%AF%E6%B3%95">回溯法</a>方便地搜索整个解空间 。</p>
<p>3 、以深度优先的方式搜索解空间，并且在搜索过程中用剪枝函数避免无效搜索。</p>
<h4 id="题目："><a href="#题目：" class="headerlink" title="题目："></a>题目：</h4><p>全排列是一个典型的回溯算法<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/permutations/submissions/">https://leetcode-cn.com/problems/permutations/submissions/</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; permute(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">            List&lt;List&lt;Integer&gt;&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="keyword">int</span>[] visited = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length];</span><br><span class="line">            backtrace(list,nums,<span class="keyword">new</span> ArrayList&lt;Integer&gt;(), visited);</span><br><span class="line">            <span class="keyword">return</span> list ; </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">backtrace</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; list, <span class="keyword">int</span>[] nums, ArrayList&lt;Integer&gt; arr, <span class="keyword">int</span>[] visited)</span></span>&#123;</span><br><span class="line">			<span class="comment">// 达到目标条件退出</span></span><br><span class="line">            <span class="keyword">if</span>(arr.size()==nums.length)&#123;</span><br><span class="line">                    list.add(<span class="keyword">new</span> ArrayList&lt;&gt;(arr));</span><br><span class="line">                    <span class="keyword">return</span> ;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;visited.length; i++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(visited[i]==<span class="number">1</span>) <span class="keyword">continue</span>;</span><br><span class="line">                    visited[i] = <span class="number">1</span> ;</span><br><span class="line">                    arr.add(nums[i]);	<span class="comment">// 选取当前值</span></span><br><span class="line">                    backtrace(list,nums,arr,visited); <span class="comment">// 在选择当前值的情况下，进入下一个状态</span></span><br><span class="line">                    visited[i]=<span class="number">0</span>;</span><br><span class="line">                    arr.remove(arr.size()-<span class="number">1</span>);	<span class="comment">// 删除当前值</span></span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiongyujie.github.io/2021/07/01/%E7%AE%97%E6%B3%95/%E5%B9%B6%E6%9F%A5%E9%9B%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ava.jpeg">
      <meta itemprop="name" content="玉杰君">
      <meta itemprop="description" content="坚持！坚持！坚持！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiongyujie's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/01/%E7%AE%97%E6%B3%95/%E5%B9%B6%E6%9F%A5%E9%9B%86/" class="post-title-link" itemprop="url">并查集</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-07-01 00:00:00" itemprop="dateCreated datePublished" datetime="2021-07-01T00:00:00+08:00">2021-07-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-16 16:33:53" itemprop="dateModified" datetime="2021-07-16T16:33:53+08:00">2021-07-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2021/07/01/%E7%AE%97%E6%B3%95/%E5%B9%B6%E6%9F%A5%E9%9B%86/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2021/07/01/算法/并查集/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="并查集"><a href="#并查集" class="headerlink" title="并查集"></a>并查集</h3><p>参考文章：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/93647900">https://zhuanlan.zhihu.com/p/93647900</a></p>
<p>并查集是一种树形的数据结构，用于处理一些不相交的集合<code>(Disjoint Sets)</code>的合并及查询问题。常常在使用中以森林来表示。</p>
<p>主要操作：</p>
<ol>
<li>合并：两个不相交的集合；</li>
<li>查询：判断两个元素是否属于同一集合</li>
</ol>
<p>并查集优化：</p>
<ol>
<li>路径压缩</li>
<li>Rank合并</li>
</ol>
<p>以<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/number-of-provinces/">省份数量</a>为例子，进行解答：</p>
<p>将相互关联的城市划分到若干个不相交的集合中，每个集合中相互连通。然后判断又几个连通分量，就可以知道有几个城市了。</p>
<p>并查集的代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Union</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span>[] f ;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//初始化</span></span><br><span class="line">	Union(<span class="keyword">int</span> n)&#123;</span><br><span class="line">		f = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>];</span><br><span class="line">        <span class="comment">// 开始地时候每个父节点是它自己</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++)&#123;</span><br><span class="line">			f[i] = i;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">        <span class="comment">// 如果父节点自己，则返回。</span></span><br><span class="line">        <span class="comment">//如果父亲节点不是自己，则找到父亲节点，并且跟新返回</span></span><br><span class="line">        <span class="keyword">if</span>(f[x] == x)&#123;</span><br><span class="line">            <span class="keyword">return</span> f[x];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//更新父亲节点</span></span><br><span class="line">        f[x] = find(f[x]);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> f[x];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">        <span class="comment">// 合并x, y节点。将y的父节点指向x的根节点</span></span><br><span class="line">        f[find(x)] = find(y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过并查集就可以很快的找到将城市分类，然后根据城市的类别个数返回；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findCircleNum</span><span class="params">(<span class="keyword">int</span>[][] isConnected)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = isConnected.length;</span><br><span class="line">        Union union = <span class="keyword">new</span> Union(n);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt;= n; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(isConnected[i - <span class="number">1</span>][j - <span class="number">1</span>] == <span class="number">1</span>)&#123;</span><br><span class="line">                    union.merge(i, j);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Set&lt;Integer&gt; hs = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">            hs.add(union.find(i));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> hs.size();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<p>路径压缩：</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiongyujie.github.io/2021/07/01/%E7%AE%97%E6%B3%95/%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ava.jpeg">
      <meta itemprop="name" content="玉杰君">
      <meta itemprop="description" content="坚持！坚持！坚持！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiongyujie's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/01/%E7%AE%97%E6%B3%95/%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2/" class="post-title-link" itemprop="url">广度优先搜索</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-07-01 00:00:00" itemprop="dateCreated datePublished" datetime="2021-07-01T00:00:00+08:00">2021-07-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-16 16:35:30" itemprop="dateModified" datetime="2021-07-16T16:35:30+08:00">2021-07-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/%E6%90%9C%E7%B4%A2/" itemprop="url" rel="index"><span itemprop="name">搜索</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2021/07/01/%E7%AE%97%E6%B3%95/%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2021/07/01/算法/广度优先搜索/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="广度优先搜索："><a href="#广度优先搜索：" class="headerlink" title="广度优先搜索："></a>广度优先搜索：</h4><p>广度优先搜索算法<code>(BFS)</code>，其从根节点开始，沿着树或者图的宽度遍历节点，如果所有节点都已经被访问，则算法结束。</p>
<p>算法过程：</p>
<ol>
<li>首先将根节点放入队列中。</li>
<li>从队列中取出第一个节点，并检验它是否为目标。<ul>
<li>如果找到目标，则结束搜索并回传结果。</li>
<li>否则将它所有尚未检验过的直接子节点加入队列中。</li>
</ul>
</li>
<li>若队列为空，表示整张图都检查过了——亦即图中没有欲搜索的目标。结束搜索并回传“找不到目标”。</li>
<li>重复步骤2。</li>
</ol>
<p>例题</p>
<table>
<thead>
<tr>
<th>题目</th>
<th align="left">难度</th>
<th>简介</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-level-order-traversal/">二叉树的层序遍历</a></td>
<td align="left">中等</td>
<td>单源广度优先搜索</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/as-far-from-land-as-possible/"> 地图分析</a></td>
<td align="left">中等</td>
<td>多源广度优先搜索<code>(迪杰斯特拉)</code></td>
</tr>
</tbody></table>
<h5 id="二叉树的层序遍历"><a href="#二叉树的层序遍历" class="headerlink" title="二叉树的层序遍历"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/binary-tree-level-order-traversal/">二叉树的层序遍历</a></h5><p>将根节点加入到队列中 ，然后当队列不为难空时，依次遍历队列的长度，然后取出队中元素，如果该元素左右子树不为空，则分别插入队列</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; levelOrder(TreeNode root) &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">        Queue&lt;TreeNode&gt; que = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        que.add(root);</span><br><span class="line">        <span class="keyword">while</span>(!que.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">int</span> size = que.size();</span><br><span class="line">            List&lt;Integer&gt; tmp = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)&#123;</span><br><span class="line">                TreeNode node = que.poll();</span><br><span class="line">                tmp.add(node.val);</span><br><span class="line">                <span class="keyword">if</span>(node.left != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    que.add(node.left);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(node.right != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    que.add(node.right);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            res.add(<span class="keyword">new</span> ArrayList&lt;&gt;(tmp));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="地图分析"><a href="#地图分析" class="headerlink" title="地图分析"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/as-far-from-land-as-possible/">地图分析</a></h5><p>该题为多源广度优先搜索，将所有的陆地加入队列，然后从各个陆地向外层发展，最后到达的海洋为最远的的海洋。参考<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/as-far-from-land-as-possible/solution/jian-dan-java-miao-dong-tu-de-bfs-by-sweetiee/">https://leetcode-cn.com/problems/as-far-from-land-as-possible/solution/jian-dan-java-miao-dong-tu-de-bfs-by-sweetiee/</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxDistance</span><span class="params">(<span class="keyword">int</span>[][] grid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] dx = &#123;-<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span>[] dy = &#123;<span class="number">0</span>, <span class="number">0</span>, -<span class="number">1</span>, <span class="number">1</span>&#125;;</span><br><span class="line">        Queue&lt;<span class="keyword">int</span>[]&gt; que = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> m = grid.length;</span><br><span class="line">        <span class="keyword">int</span> n = grid[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span> ;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(grid[i][j] == <span class="number">1</span>)&#123;</span><br><span class="line">                    que.add(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;i, j&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(que.size() == <span class="number">0</span> || que.size() == m*n)&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(!que.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">int</span>[] tmp = que.poll();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)&#123;</span><br><span class="line">                <span class="keyword">int</span> x = tmp[<span class="number">0</span>] + dx[i];</span><br><span class="line">                <span class="keyword">int</span> y = tmp[<span class="number">1</span>] + dy[i];</span><br><span class="line">                <span class="keyword">if</span>(x &lt; <span class="number">0</span> || x == m || y &lt; <span class="number">0</span> || y == n || grid[x][y] != <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">continue</span> ;</span><br><span class="line">                &#125;</span><br><span class="line">                grid[x][y] = grid[tmp[<span class="number">0</span>]][tmp[<span class="number">1</span>]] + <span class="number">1</span>;</span><br><span class="line">                que.add(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;x, y&#125;);</span><br><span class="line">                res = Math.max(grid[x][y], res);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiongyujie.github.io/2021/07/01/%E7%AE%97%E6%B3%95/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ava.jpeg">
      <meta itemprop="name" content="玉杰君">
      <meta itemprop="description" content="坚持！坚持！坚持！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiongyujie's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/01/%E7%AE%97%E6%B3%95/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2/" class="post-title-link" itemprop="url">广度优先搜索</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-07-01 00:00:00" itemprop="dateCreated datePublished" datetime="2021-07-01T00:00:00+08:00">2021-07-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-16 16:38:51" itemprop="dateModified" datetime="2021-07-16T16:38:51+08:00">2021-07-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/%E6%90%9C%E7%B4%A2/" itemprop="url" rel="index"><span itemprop="name">搜索</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2021/07/01/%E7%AE%97%E6%B3%95/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2021/07/01/算法/深度优先搜索/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="深度优先搜索"><a href="#深度优先搜索" class="headerlink" title="深度优先搜索"></a>深度优先搜索</h4><p>深度优先搜索<code>(DFS)</code>从一个顶点开始沿着一条路走到底，如果发现不能到达目标解，就返回另一个节点，然后从另一条路开始走到底。深度优先搜索一般使用遍历的方法或者是栈的方法。</p>
<p>基本思路：</p>
<ol>
<li>访问顶点v；</li>
<li>依次从v的未被访问的邻接点出发，对图进行<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E9%81%8D%E5%8E%86">深度优先遍历</a>；直至图中和v有路径相通的顶点都被访问；</li>
<li>若此时图中尚有顶点未被访问，则从一个未被访问的顶点出发，重新进行<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E9%81%8D%E5%8E%86">深度优先遍历</a>，直到图中所有顶点均被访问过为止。</li>
</ol>
<p>深度优先搜索的例子，如二叉树的先根，中序，后序遍历。</p>
<p>题目：</p>
<h4 id="岛屿的最大面积"><a href="#岛屿的最大面积" class="headerlink" title=" 岛屿的最大面积"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/max-area-of-island/"> 岛屿的最大面积</a></h4><p>岛屿的最大面积：从起始点开始遍历，当点已经遍历过设为0，然后朝着4个方向走，知道这块面积以及遍历完成。完成所有岛屿的遍历，最后得到面积最大的岛屿。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span> ;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxAreaOfIsland</span><span class="params">(<span class="keyword">int</span>[][] grid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m = grid.length;</span><br><span class="line">        <span class="keyword">int</span> n = grid[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>; </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++)&#123;</span><br><span class="line">                res = Math.max(res, dfs(grid, m, n, i, j));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span>[][] grid, <span class="keyword">int</span> m, <span class="keyword">int</span> n, <span class="keyword">int</span> i , <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i &lt; <span class="number">0</span> || j &lt; <span class="number">0</span> || i == m || j == n || grid[i][j] == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">1</span>;</span><br><span class="line">        grid[i][j] = <span class="number">0</span> ;</span><br><span class="line">        res += dfs(grid, m, n, i+<span class="number">1</span>, j);</span><br><span class="line">        res += dfs(grid, m, n, i-<span class="number">1</span>, j);</span><br><span class="line">        res += dfs(grid, m, n, i, j+<span class="number">1</span>);</span><br><span class="line">        res += dfs(grid, m, n, i, j-<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiongyujie.github.io/2021/06/07/%E7%AE%97%E6%B3%95/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ava.jpeg">
      <meta itemprop="name" content="玉杰君">
      <meta itemprop="description" content="坚持！坚持！坚持！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiongyujie's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/07/%E7%AE%97%E6%B3%95/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-07 19:47:43" itemprop="dateCreated datePublished" datetime="2021-06-07T19:47:43+08:00">2021-06-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-16 16:33:00" itemprop="dateModified" datetime="2021-07-16T16:33:00+08:00">2021-07-16</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2021/06/07/%E7%AE%97%E6%B3%95/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2021/06/07/算法/背包问题/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <hr>
<p>title:  背包问题</p>
<p>date:  2021/7/1</p>
<p>categories:</p>
<ul>
<li>算法</li>
</ul>
<p>tags:</p>
<ul>
<li>动态规划</li>
<li>背包</li>
</ul>
<hr>
<ol>
<li>01背包</li>
<li>完全背包</li>
<li>多重背包问题</li>
<li>混合背包问题</li>
<li>二维费用背包问题</li>
<li>分组背包问题</li>
<li>背包问题求方案数</li>
<li>求背包问题的方案数</li>
<li>有依赖的背包</li>
</ol>
<p>答题地址：<a target="_blank" rel="noopener" href="https://www.acwing.com/problem/">https://www.acwing.com/problem/</a></p>
<h3 id="01背包"><a href="#01背包" class="headerlink" title="01背包"></a><code>01</code>背包</h3><p><code>01</code>背包题目的雏形是：</p>
<p>有<code>N</code>件物品和一个容量为<code>V</code>的背包。第i件物品的体积是<code>c[i]</code>，价值是<code>w[i]</code>。求解将哪些物品装入背包可使价值总和最大。</p>
<p>从这个题目中可以看出，<code>01</code>背包的特点就是：每种物品仅有一件，可以选择放或不放。</p>
<p>状态转移方程，$f[i][j] = max(f[i - 1][j], f[i - 1][j - c[i]] + w[i])$</p>
<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/description/2/">2. 01背包问题 - AcWing题库</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">		<span class="keyword">int</span> m = scan.nextInt();</span><br><span class="line">		<span class="keyword">int</span> n = scan.nextInt();</span><br><span class="line">		<span class="keyword">int</span>[] w = <span class="keyword">new</span> <span class="keyword">int</span>[m];</span><br><span class="line">		<span class="keyword">int</span>[] v = <span class="keyword">new</span> <span class="keyword">int</span>[m];</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">			w[i] = scan.nextInt();</span><br><span class="line">			v[i] = scan.nextInt();</span><br><span class="line">		&#125;</span><br><span class="line">        <span class="comment">// 状态方程表示价值</span></span><br><span class="line">		<span class="keyword">int</span>[][] f = <span class="keyword">new</span> <span class="keyword">int</span>[m + <span class="number">1</span>][n + <span class="number">1</span>];</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;		<span class="comment">// 对物品进行遍历</span></span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= n; j++) &#123;	<span class="comment">// 对价值评估</span></span><br><span class="line">				f[i][j] = f[i - <span class="number">1</span>][j];		</span><br><span class="line">				<span class="keyword">if</span>(j &gt;= w[i - <span class="number">1</span>])</span><br><span class="line">					f[i][j] = Math.max(f[i - <span class="number">1</span>][j], f[i - <span class="number">1</span>][j - w[i - <span class="number">1</span>]] + v[i - <span class="number">1</span>]);</span><br><span class="line">                	<span class="comment">// 对于第I个物品，选择或者不选。</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(f[m][n]);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试用例转移状态</p>
<p><img src="https://image-1300045024.cos.ap-nanjing.myqcloud.com/img/20210612222557.png" alt="image-20210612222557269"></p>
<h5 id="分割等和子集：https-leetcode-cn-com-problems-partition-equal-subset-sum"><a href="#分割等和子集：https-leetcode-cn-com-problems-partition-equal-subset-sum" class="headerlink" title="分割等和子集：https://leetcode-cn.com/problems/partition-equal-subset-sum/"></a>分割等和子集：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/partition-equal-subset-sum/">https://leetcode-cn.com/problems/partition-equal-subset-sum/</a></h5><p>该题位01背包的变形，背包和位数组和的一半。</p>
<p>选取该值可以达到的状态和不选取改值达到的状态。由于，每个值只能选取一次，所以数组的遍历放在外面，状态转移方程为:$f[i][j] = f[i -1][j] || f[i - 1][j - x]$</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canPartition</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> len = nums.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> val: nums)&#123;</span><br><span class="line">            sum += val;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(sum % <span class="number">2</span> == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> t = sum / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">boolean</span>[][] f = <span class="keyword">new</span> <span class="keyword">boolean</span>[len + <span class="number">1</span>][t + <span class="number">1</span>];</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="keyword">true</span> ;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= len; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> x = nums[i - <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= t; j++)&#123;</span><br><span class="line">                f[i][j] = f[i-<span class="number">1</span>][j];</span><br><span class="line">                <span class="keyword">if</span>(x &lt;= j)&#123;</span><br><span class="line">                    f[i][j] = f[i - <span class="number">1</span>][j] || f[i-<span class="number">1</span>][j-x];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[len][t];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试用例转移状态</p>
<p><img src="https://image-1300045024.cos.ap-nanjing.myqcloud.com/img/20210614151344.png" alt="image-20210614151336985"></p>
<h4 id="完全背包问题："><a href="#完全背包问题：" class="headerlink" title="完全背包问题："></a>完全背包问题：</h4><p>有 <code>N</code>种物品和一个容量是 <code>V</code> 的背包，每种物品都有无限件可用。</p>
<p>第<code>i</code>种物品的体积是 $v_i$，价值是 $w_i$。</p>
<p>求解将哪些物品装入背包，可使这些物品的总体积不超过背包容量，且总价值最大。<br>输出最大价值。</p>
<p>题目地址：<a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/3/">https://www.acwing.com/problem/content/3/</a></p>
<p>状态转移方程：$f[i][j] = max(f[i][j], f[i-1][j-k*weight] + k * value)$</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Problem_003</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">		<span class="keyword">int</span> m = scan.nextInt();</span><br><span class="line">		<span class="keyword">int</span> n = scan.nextInt();</span><br><span class="line">		<span class="keyword">int</span>[] w = <span class="keyword">new</span> <span class="keyword">int</span>[m];</span><br><span class="line">		<span class="keyword">int</span>[] v = <span class="keyword">new</span> <span class="keyword">int</span>[m];</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">			w[i] = scan.nextInt();</span><br><span class="line">			v[i] = scan.nextInt();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">int</span>[][] f = <span class="keyword">new</span> <span class="keyword">int</span>[m + <span class="number">1</span>][n + <span class="number">1</span>];</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">			<span class="keyword">int</span> x = w[i - <span class="number">1</span>];</span><br><span class="line">			<span class="keyword">int</span> y = v[i - <span class="number">1</span>];</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= n; j++) &#123;</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt;= j / x; k++) &#123;</span><br><span class="line">					f[i][j] = Math.max(f[i][j], f[i - <span class="number">1</span>][j - k * x] + k * y);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(f[m][n]);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>测试用例转移过程：</p>
<table>
<thead>
<tr>
<th align="center">f[I, J]</th>
<th align="center">0</th>
<th align="center">1</th>
<th align="center">2</th>
<th align="center">3</th>
<th align="center">4</th>
<th align="center">5</th>
</tr>
</thead>
<tbody><tr>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">2</td>
<td align="center">4</td>
<td align="center">6</td>
<td align="center">8</td>
<td align="center">10</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">0</td>
<td align="center">2</td>
<td align="center">4</td>
<td align="center">6</td>
<td align="center">8</td>
<td align="center">10</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">0</td>
<td align="center">2</td>
<td align="center">4</td>
<td align="center">6</td>
<td align="center">8</td>
<td align="center">10</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">0</td>
<td align="center">2</td>
<td align="center">4</td>
<td align="center">6</td>
<td align="center">8</td>
<td align="center">10</td>
</tr>
</tbody></table>
<p>将完全背包问题转换为01背包问题</p>
<p>完全背包联系：</p>
<p>完全平方数：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/perfect-squares/">https://leetcode-cn.com/problems/perfect-squares/</a></p>
<p>完全平方数非贪心，从头开始进行选取最小的值状态转移方程$f[i] = min(f[j] + f[i - j], f[i])$</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numSquares</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>];</span><br><span class="line">        Arrays.fill(dp, Integer.MAX_VALUE);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> tmp = i * i;</span><br><span class="line">            <span class="keyword">if</span>(tmp == n)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(tmp &lt; n)&#123;</span><br><span class="line">                dp[tmp] = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(dp[i] == <span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; i; j++)&#123;</span><br><span class="line">                dp[i] = Math.min(dp[j] + dp[i - j], dp[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>完全平方数贪心，每次从存在平方选取，状态转移方程：$f[i] = min(f[i - j*j], f[i]) + 1$</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numSquares</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> min = Integer.MAX_VALUE;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>;  j * j &lt;= i; j++)&#123;</span><br><span class="line">                min = Math.min(min, dp[i - j*j]);</span><br><span class="line">            &#125;</span><br><span class="line">            dp[i] = min + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>零钱兑款：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/coin-change/">https://leetcode-cn.com/problems/coin-change/</a></p>
<p>将零钱的个数存储在数组中，当使用当前零钱币值的之后数量+1，状态转移方程：$f[i] = min(f[i], f[i-coin] + 1)$</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">coinChange</span><span class="params">(<span class="keyword">int</span>[] coins, <span class="keyword">int</span> amount)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] f = <span class="keyword">new</span> <span class="keyword">int</span>[amount + <span class="number">1</span>];</span><br><span class="line">        Arrays.fill(f, amount + <span class="number">1</span>);</span><br><span class="line">        f[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= amount; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> coin: coins)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i - coin &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">                    f[i] = Math.min(f[i], f[i - coin] + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[amount] == (amount + <span class="number">1</span>) ? -<span class="number">1</span>: f[amount];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>零钱兑换II：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/coin-change-2/">https://leetcode-cn.com/problems/coin-change-2/</a></p>
<p>将前i个钱币的凑出的数量存放在f[i]中，状态转移方程就是：$f[i] = f[i- c_1] + f[i - c_2]+… + f[i - c_n]$</p>
<p>不能看出这个和青蛙调台阶是差不多的，但是其实是不一样，零钱兑换为外层循环，最终结果没有重复的值，而青蛙跳台阶是由重复的值得。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">change</span><span class="params">(<span class="keyword">int</span> amount, <span class="keyword">int</span>[] coins)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] f = <span class="keyword">new</span> <span class="keyword">int</span>[amount + <span class="number">1</span>];</span><br><span class="line">        f[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> coin: coins)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= amount; i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i &gt;= coin)&#123;</span><br><span class="line">                    f[i] += f[i - coin];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[amount];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


























      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiongyujie.github.io/2021/05/09/MIT6.828/06_lab2_q&h/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ava.jpeg">
      <meta itemprop="name" content="玉杰君">
      <meta itemprop="description" content="坚持！坚持！坚持！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiongyujie's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/09/MIT6.828/06_lab2_q&h/" class="post-title-link" itemprop="url">lab2问答</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-09 12:33:00" itemprop="dateCreated datePublished" datetime="2021-05-09T12:33:00+08:00">2021-05-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-16 16:51:07" itemprop="dateModified" datetime="2021-07-16T16:51:07+08:00">2021-07-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MIT-OS-6-828/" itemprop="url" rel="index"><span itemprop="name">MIT OS 6.828</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2021/05/09/MIT6.828/06_lab2_q&h/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2021/05/09/MIT6.828/06_lab2_q&h/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="question-2"><a href="#question-2" class="headerlink" title="question 2"></a>question 2</h4><p>此时，页面目录中的哪些条目（行）已填写？他们映射什么地址，并指向何处？换句话说，请尽可能填写此表：</p>
<table>
<thead>
<tr>
<th>entry</th>
<th>Base virtual address</th>
<th>Points to (logically)</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td><code>KERNBASE</code></td>
<td>0</td>
</tr>
<tr>
<td></td>
<td><code>STACKTOP-KSTSIZE</code></td>
<td><code>bootstack</code></td>
</tr>
<tr>
<td></td>
<td><code>UPAGES</code></td>
<td><code>pages</code></td>
</tr>
</tbody></table>
<h4 id="question-3"><a href="#question-3" class="headerlink" title="question 3"></a>question 3</h4><p>已经将内核和用户环境放置在相同的地址空间中。为什么用户程序不能读取或写入内核的内存？哪些特定机制可以保护内核内存？</p>
<p>页的访问权限标志<code>flag</code></p>
<h4 id="question-4"><a href="#question-4" class="headerlink" title="question 4"></a>question 4</h4><p>该操作系统可以支持的最大物理内存量是多少？为什么？</p>
<p><code>UPAGES = PGSIZE * NPTENTRIES = 4096 * 1024 = 4MB,    </code></p>
<p> <code>size(pageinfo) = 8B, </code></p>
<p><code>4MB / 8B  * 4096B = 2GB</code> </p>
<h4 id="question-5"><a href="#question-5" class="headerlink" title="question 5"></a>question 5</h4><p>如果我们实际拥有最大的物理内存量，那么管理内存有多少空间开销？这个开销如何分解？</p>
<p><code>UPAGES = 4MB, 页表目录: 1024 * 32 / 8 = 4KB, 页表：4MB / 8B * 32 / 8 = 2MB </code></p>
<p>一共内存开销<code>6MB + 4KB</code></p>
<h4 id="question-6"><a href="#question-6" class="headerlink" title="question 6"></a>question 6</h4><p>重新访问<code>kern/entry.S</code>和<code>kern/entrypgdir.c</code>中的页表设置。在打开分页后，<code>EIP</code>仍然是一个很小的数字（略大于<code>1MB</code>）。在什么时候我们要过渡到在<code>KERNBASE</code>之上的<code>EIP</code>上运行？在启用分页与开始在高于<code>KERNBASE</code>的<code>EIP</code>之间运行，有什么可能使我们能够以较低的<code>EIP</code>继续执行？为什么需要这种过渡？</p>
<p>当C语言运行再<code>KERNBASE</code>上之后，将部分虚拟地址映射到物理地址，之后会放弃这些映射，来映射<code>kern_pgdir()</code></p>
<h4 id="Home-Work-SHELL"><a href="#Home-Work-SHELL" class="headerlink" title="Home Work: SHELL"></a>Home Work: SHELL</h4><table>
<thead>
<tr>
<th>函数</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td><code>pipe</code></td>
<td>提供单向进程间的通信，管道具有读取端和写入端，<code>fd[0]</code>读取端。<code>fd[1]</code>写入端</td>
</tr>
<tr>
<td><code>execv</code></td>
<td>用来执行路径所代表的文件</td>
</tr>
<tr>
<td><code>open</code></td>
<td>打开文件，返回文件描述符号</td>
</tr>
<tr>
<td><code>fork</code></td>
<td>通过复制调用过程来创建一个子进程</td>
</tr>
<tr>
<td><code>close</code></td>
<td>关闭一个文件描述符。将数据写回磁盘。</td>
</tr>
<tr>
<td><code>dup</code></td>
<td>复制一个文件描述符。用作重定向打开一个文件描述符号。</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">runcmd</span><span class="params">(struct cmd *cmd)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> p[<span class="number">2</span>], r;</span><br><span class="line">  <span class="keyword">int</span> fd, fd2;</span><br><span class="line">  <span class="keyword">char</span> buffer[<span class="number">1</span>];</span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">execcmd</span> *<span class="title">ecmd</span>;</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">pipecmd</span> *<span class="title">pcmd</span>;</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">redircmd</span> *<span class="title">rcmd</span>;</span></span><br><span class="line">  <span class="keyword">char</span>  tmp[] = <span class="string">&quot;/bin/&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span>(cmd == <span class="number">0</span>)</span><br><span class="line">    _exit(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">switch</span>(cmd-&gt;type)&#123;</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;unknechgown runcmd\n&quot;</span>);</span><br><span class="line">    _exit(<span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">case</span> <span class="string">&#x27; &#x27;</span>:</span><br><span class="line">    ecmd = (struct execcmd*)cmd;</span><br><span class="line">    <span class="keyword">if</span>(ecmd-&gt;argv[<span class="number">0</span>] == <span class="number">0</span>)</span><br><span class="line">      _exit(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// fprintf(stderr, &quot;exec not implemented\n&quot;);</span></span><br><span class="line">    <span class="comment">// Your code here ...</span></span><br><span class="line">    <span class="built_in">strcat</span>(tmp, ecmd-&gt;argv[<span class="number">0</span>]);</span><br><span class="line">    execv(tmp, ecmd-&gt;argv);</span><br><span class="line">    <span class="built_in">fprintf</span>(<span class="built_in">stdout</span>, <span class="string">&quot;%s fail&quot;</span>, ecmd-&gt;argv[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">case</span> <span class="string">&#x27;&gt;&#x27;</span>:</span><br><span class="line">    rcmd = (struct redircmd*)cmd;</span><br><span class="line">    <span class="keyword">if</span>(fork() == <span class="number">0</span>)&#123;</span><br><span class="line">        dup(rcmd-&gt;fd);</span><br><span class="line">        close(rcmd-&gt;fd);</span><br><span class="line">        open(rcmd-&gt;file, rcmd-&gt;flags, <span class="number">00700</span>);</span><br><span class="line">        runcmd(rcmd-&gt;cmd);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&#x27;&lt;&#x27;</span>:</span><br><span class="line">      rcmd = (struct redircmd*)cmd;</span><br><span class="line">      close(rcmd-&gt;fd);</span><br><span class="line">      <span class="keyword">if</span>(open(rcmd-&gt;file, rcmd-&gt;flags, <span class="number">00700</span>))&#123;</span><br><span class="line">          <span class="built_in">fprintf</span>(<span class="built_in">stdout</span>, <span class="string">&quot;%s fail&quot;</span>, rcmd-&gt;file);</span><br><span class="line">          _exit(<span class="number">-1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      runcmd(rcmd-&gt;cmd);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">case</span> <span class="string">&#x27;|&#x27;</span>:</span><br><span class="line">    pcmd = (struct pipecmd*)cmd;</span><br><span class="line">    r = pipe(p);</span><br><span class="line">    <span class="keyword">if</span>(fork1() == <span class="number">0</span>)&#123;</span><br><span class="line">      close(<span class="number">1</span>);</span><br><span class="line">      dup(p[<span class="number">1</span>]);</span><br><span class="line">      close(p[<span class="number">0</span>]);</span><br><span class="line">      close(p[<span class="number">1</span>]);</span><br><span class="line">      runcmd(pcmd -&gt; left);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(fork1() == <span class="number">0</span>)&#123;</span><br><span class="line">      close(<span class="number">0</span>);</span><br><span class="line">      dup(p[<span class="number">0</span>]);</span><br><span class="line">      close(p[<span class="number">0</span>]);</span><br><span class="line">      close(p[<span class="number">1</span>]);</span><br><span class="line">      runcmd(pcmd -&gt; right);</span><br><span class="line">    &#125;</span><br><span class="line">    close(p[<span class="number">0</span>]);</span><br><span class="line">    close(p[<span class="number">1</span>]);</span><br><span class="line">    wait(&amp;r);</span><br><span class="line">    wait(&amp;r);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;    </span><br><span class="line">  _exit(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Home-Work-System-calls"><a href="#Home-Work-System-calls" class="headerlink" title="Home Work: System calls"></a>Home Work: System calls</h5>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiongyujie.github.io/2021/04/18/MIT6.828/05_lab2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ava.jpeg">
      <meta itemprop="name" content="玉杰君">
      <meta itemprop="description" content="坚持！坚持！坚持！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiongyujie's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/18/MIT6.828/05_lab2/" class="post-title-link" itemprop="url">lab2 代码</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-18 15:57:18" itemprop="dateCreated datePublished" datetime="2021-04-18T15:57:18+08:00">2021-04-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-16 16:48:18" itemprop="dateModified" datetime="2021-07-16T16:48:18+08:00">2021-07-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/6-828/" itemprop="url" rel="index"><span itemprop="name">6.828</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/6-828/%E4%BB%A3%E7%A0%81/" itemprop="url" rel="index"><span itemprop="name">代码</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2021/04/18/MIT6.828/05_lab2/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2021/04/18/MIT6.828/05_lab2/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Lab2-内存管理"><a href="#Lab2-内存管理" class="headerlink" title="Lab2: 内存管理"></a>Lab2: 内存管理</h3><h4 id="简介："><a href="#简介：" class="headerlink" title="简介："></a>简介：</h4><p>在这个实验中，我们价格会为操作系统写两个内存管理代码。内存管理主要有两个部分。</p>
<ol>
<li>第一部分是内核物理内存分配，内核能够分配内存，并且之后会释放它。你将会分配<code>4096Byte</code>被称为页，我们的任务就是维护数据结构，该数据结构主要记录哪些物理页表是空闲，哪些是分配的，以及有多少哥进程共享每个分配页面。最后编写例程来分配和释放内存页面。</li>
<li>第二部分是虚拟内存管理，他将内核和用户软件使用的虚拟地址映射到物理地址。当指令使用内存时候，<code>x86</code>硬件内存管理单元<code>(MMU)</code>执行映射，查阅页表。然后根据提供的<code>JOS</code>规范来修改<code>MMU</code>的页表。</li>
</ol>
<p>这个实验有点难，自己写了一点，实在是不会，参考了别人的代码。<a target="_blank" rel="noopener" href="https://github.com/clann24/jos/tree/master/lab2">https://github.com/clann24/jos/tree/master/lab2</a></p>
<p>了解基础知识</p>
<p><img src="https://image-1300045024.cos.ap-nanjing.myqcloud.com/img/20210508134524.png" alt="image-20210508134521918"></p>
<p>内核操作的是虚拟地址，而内存实际操作的是物理地址。这一章的主要内容就是将虚拟地址和物理地址的转换和管理。</p>
<ol>
<li>虚拟地址前10位置存放的是页表目录(存放页表起始地址)的偏移地址，取偏移地址的操作<code>PDX(va)</code></li>
<li>中间10存放的是页表(存放页地址)的偏移地址,，取页表的偏移地址位<code>PTX(va)</code></li>
<li>后12位放的是页内偏移地址，取偏移地址操作位<code>PGOFF(va)</code></li>
</ol>
<p>物理页结构如下，后面12位主要位为访问权限，前面20位为物理页号。除此之外，页表和页目录都有12位的访问权限设定。</p>
<p><img src="https://image-1300045024.cos.ap-nanjing.myqcloud.com/img/20210508135736.png" alt="image-20210508135734116"></p>
<h4 id="开始：环境准备"><a href="#开始：环境准备" class="headerlink" title="开始：环境准备"></a>开始：环境准备</h4><p>接下来，我们将会一部的构建内核，该课程提供了一些额外的资源，将<code>lab1</code>提交保存，同步到服务器新版本。</p>
<p>创建<code>lab2</code>分支</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git pull</span><br><span class="line">git checkout -b lab2 origin/lab2 //创建分支，将origin/lab2分支内容拷贝到lab2中</span><br><span class="line">git merge lab1 将lab1内容合并到lab2中</span><br></pre></td></tr></table></figure>

<p><code>ps: git commit -a</code>解决分支提交。</p>
<p><code>Lab 2</code>包含了几个新的文件</p>
<p><code>inc/memlayout.h</code>：描述了必须通过<code>pmap.c</code>来实现虚拟地址空间的布局。</p>
<p><code>kern/pmap.h</code></p>
<p><code>kern/pmap.h</code></p>
<p><code>kern.kclock.h</code></p>
<p><code>kern/kclock.c</code></p>
<p><code>memlayout.h</code>和<code>pmap.h</code>定义了<code>PageInfo</code>，来跟踪哪些物理内存空间的布局吗。<code>kclock.h</code>和<code>kclock.c</code>操作PC的电池供电时钟和<code>CMOS RAM</code>硬件，其中<code>BIOS</code>记录<code>PC</code>包含的物理内存。<code>pmap.c</code>中的代码需要读取该设备的硬件才能确定有多少内存。</p>
<p><code>memlayout.h</code>和<code>pmap.h</code>是关注的重点。</p>
<h3 id="第一部分：物理页面管理"><a href="#第一部分：物理页面管理" class="headerlink" title="第一部分：物理页面管理"></a>第一部分：物理页面管理</h3><p>操作系统必须跟踪物理<code>RAM</code>那些部分空闲以及正在使用的部分，<code>JOS</code>管理物理内存使用页面粒度，以便于可以使用<code>MMU</code>映射和保护分配的内存。</p>
<p>现在我们将会编写物理页分配，它通过<code>struct PageInfo</code>对象的链接列表来追踪哪些页面是空闲的，每个页面都有对应的一个物理页面，所以必须先编写物理页面分配器，然后才能编写其他的虚拟内存分配。因为页表管理代码将分配用于存储内存的物理页。</p>
<h4 id="Exercise-1"><a href="#Exercise-1" class="headerlink" title="Exercise 1"></a>Exercise 1</h4><p>在文件<code>kern/pmap.c</code>，需要实现功能：<code>boot(), mem_init(), page_init(), page_alloc(), page_free()</code></p>
<p><code>check_page_free_list()</code>和<code>check_page_alloc()</code>测试物理页面分配。启动<code>JOS</code>并且查看<code>check_page_allo()</code>检测代码是否成功。</p>
<p>这部分的实验主要就是初始化页表和分配页，释放页</p>
<p><code>boot_alloc</code>分配一大块的内存并且更新<code>nextfree</code>,并保证<code>nextfree</code>对其。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> *</span><br><span class="line">boot_alloc(<span class="keyword">uint32_t</span> n)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">char</span> *nextfree;	<span class="comment">// virtual address of next byte of free memory</span></span><br><span class="line">	<span class="keyword">char</span> *result;<span class="comment">// Initialize nextfree if this is the first time.</span></span><br><span class="line">    <span class="keyword">if</span> (!nextfree) &#123;</span><br><span class="line">        <span class="keyword">extern</span> <span class="keyword">char</span> end[];</span><br><span class="line">        nextfree = ROUNDUP((<span class="keyword">char</span> *) end, PGSIZE);</span><br><span class="line">    &#125;</span><br><span class="line">    result = nextfree;	<span class="comment">// 返回当前地址</span></span><br><span class="line">    nextfree = ROUNDUP(nextfree + n, PGSIZE); <span class="comment">// 处理下一块空闲并且进行页面对齐</span></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><code>page_init()</code>为初始化页</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pages = (struct PageInfo*) boot_alloc(pages * <span class="keyword">sizeof</span>(strcut PageInfor)); </span><br><span class="line"><span class="comment">// 分配pages内存</span></span><br><span class="line"><span class="built_in">memset</span>(pages, <span class="number">0</span>, npages * <span class="keyword">sizeof</span>(struct PageInfo))<span class="comment">// 初始化pages</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 初始化内存页面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">page_init</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">size_t</span> i;</span><br><span class="line">    <span class="comment">// 将基础内存区域放入page_free_list中</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; npages_basemem; i++) &#123;</span><br><span class="line">		pages[i].pp_ref = <span class="number">0</span>;</span><br><span class="line">		pages[i].pp_link = page_free_list;</span><br><span class="line">		page_free_list = &amp;pages[i];</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="keyword">int</span> tmp = (<span class="keyword">int</span>)ROUNDUP(((<span class="keyword">char</span>*)pages) + (<span class="keyword">sizeof</span>(struct PageInfo) * npages) - <span class="number">0xf0000000</span>, PGSIZE)/PGSIZE;</span><br><span class="line">    <span class="comment">// 将扩充内存区域放入到page_free_list中</span></span><br><span class="line">    <span class="keyword">for</span> (i = tmp; i &lt; npages; i++) &#123;</span><br><span class="line">        pages[i].pp_ref = <span class="number">0</span>;</span><br><span class="line">        pages[i].pp_link = page_free_list;</span><br><span class="line">        page_free_list = &amp;pages[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>page_alloc</code>分配页面，将<code>page_free_list</code>取下一个页面作为返回值，并将<code>page_free_list</code>向后移动一位</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">struct PageInfo * <span class="title">page_alloc</span><span class="params">(<span class="keyword">int</span> alloc_flags)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// Fill this function in</span></span><br><span class="line">    <span class="keyword">if</span>(page_free_list) &#123;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">PageInfo</span> *<span class="title">tmp</span> =</span> page_free_list;</span><br><span class="line">        page_free_list = page_free_list-&gt;pp_link;</span><br><span class="line">        <span class="keyword">if</span> (alloc_flags &amp; ALLOC_ZERO) &#123;</span><br><span class="line">            <span class="built_in">memset</span>(page2kva(tmp), <span class="number">0</span>, PGSIZE); </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> tmp;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>page_free()</code>释放页面内存，将引用计数记为0，并且将其插入到<code>page_free_list</code></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Cvoid</span><br><span class="line">page_free(struct PageInfo *pp)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">// Fill this function in</span></span><br><span class="line">	<span class="comment">// Hint: You may want to panic if pp-&gt;pp_ref is nonzero or</span></span><br><span class="line">	<span class="comment">// pp-&gt;pp_link is not NULL.</span></span><br><span class="line">	pp -&gt; pp_ref = <span class="number">0</span> ;</span><br><span class="line">	pp -&gt; pp_link = page_free_list;</span><br><span class="line">	page_free_list = pp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>跟踪物理页面。<code>pages</code>阵列每个物理页面都有一个<code>pageinfo</code>条目。页面是参考计数，空闲页面保留在链接列表中。初始化页面结构和无内存列表。完成此问题后，请勿再使用<code>boot_alloc</code>。 仅使用通过<code>page_free_list</code>来分配和处理物理地址</p>
<p>总结：这一部分看了很久，并且看了别人的代码，最后才弄懂。主要原因就是因为自己不是很懂C语言的语法并且理解的不是很细致，而且后面的<code>exercise</code>有一些提示，没有看到。</p>
<h3 id="第二部分虚拟内存"><a href="#第二部分虚拟内存" class="headerlink" title="第二部分虚拟内存"></a>第二部分虚拟内存</h3><p>熟悉<code>x86</code>的保护模式内存管理架构，分段到页面转换。</p>
<h4 id="虚拟、线性、物理地址"><a href="#虚拟、线性、物理地址" class="headerlink" title="虚拟、线性、物理地址"></a>虚拟、线性、物理地址</h4><ol>
<li>虚拟地址由一个段选择器和一个段内的偏移量组成。</li>
<li>线性地址是在段翻译之后但在页面翻译之前获得的地址。</li>
<li>物理地址是段和页面转换后最终获得的地址，最终是在硬件总线上输出到RAM的地址。</li>
</ol>
<p><img src="https://image-1300045024.cos.ap-nanjing.myqcloud.com/img/20210505143308.png" alt="image-20210505143301973"></p>
<p><code>C</code>指针是虚拟地址的偏移部分。在<code>boot / boot.S</code>中，安装了全局描述符表<code>（GDT）</code>，该表通过将所有段基址设置为0并将限制设置为<code>0xffffffff</code>，有效地禁用了段转换。因此，“选择器”无效，线性地址始终等于虚拟地址的偏移量。在<code>lab 3</code>中，我们将需要与分段进行更多的交互才能设置特权级别，但是对于内存转换，可以在整个<code>JOS</code>实验中忽略分段，而只关注页面转换。</p>
<p>内核可以在其链接地址<code>10xf0100000</code>上运行，即使该内核实际上已加载到<code>ROM BIOS</code>上方的物理内存中，即<code>0x00100000</code>。该页表仅映射了<code>4MB</code>的内存。在<code>lab 2</code>中，在虚拟地址空间布局中为<code>JOS</code>进行设置，将对其进行扩展以映射从虚拟地址<code>0xf0000000</code>开始的前<code>256MB</code>物理内存，并映射虚拟地址空间的其他多个区域。</p>
<p>从在CPU上执行的代码开始，一旦进入保护模式，就无法直接使用线性或物理地址。所有内存引用均被解释为虚拟地址，并由<code>MMU</code>进行转换，这意味着C中的所有指针均为虚拟地址。</p>
<p><code>JOS</code>内核通常需要将地址作为不透明值或整数进行操作，而无需在例如物理内存分配器中对其进行反引用。有时它们是虚拟地址，有时它们是物理地址。：<code>uintptr_t</code>类型代表不透明的虚拟地址，而<code>physaddr_t</code>类型代表物理地址。这两种类型实际上只是32位整数<code>（uint32_t）</code>的同义词，因此编译器不会阻止将一种类型分配给另一种类型！由于它们是整数类型（不是指针），因此如尝试取消引用它们，编译器出现警告。</p>
<p><img src="https://image-1300045024.cos.ap-nanjing.myqcloud.com/img/20210505145054.png" alt="image-20210505145016111"></p>
<p><code>JOS</code>内核有时需要读取或修改仅知道物理地址的内存。例如，向页表添加映射可能需要分配物理内存来存储页目录，然后初始化该内存。但是，内核无法绕过虚拟地址转换，因此无法直接加载并存储到物理地址。 <code>JOS</code>重映射从虚拟地址<code>0xf0000000</code>处的物理地址0开始的所有物理内存的原因之一是帮助内核读写仅知道物理地址的内存。为了将物理地址转换为内核可以实际读写的虚拟地址，内核必须在物理地址上添加<code>0xf0000000</code>才能在重映射区域中找到其对应的虚拟地址。您应该使用<code>KADDR(pa)</code>进行添加。</p>
<p>给定存储内核数据结构的内存的虚拟地址，<code>JOS</code>内核有时有时还需要能够找到物理地址。 <code>boot_alloc()</code>分配的内核全局变量和内存位于加载内核的区域中，从<code>0xf0000000</code>开始，该区域正是我们映射所有物理内存的区域。因此，要将该区域中的虚拟地址转换为物理地址，内核可以简单地减去<code>0xf0000000</code>。您应该使用<code>PADDR(VA)</code>进行减法。</p>
<h4 id="参考计数"><a href="#参考计数" class="headerlink" title="参考计数"></a>参考计数</h4><p>在接下来的实验室中，经常会在多个虚拟地址上同时（或在多个环境的地址空间中）映射相同的物理页面。您将在与物理页面相对应的<code>struct PageInfo</code>的<code>pp_ref</code>字段中保留对每个物理页面的引用数量的计数。当物理页面的计数变为零时，该页面可以被释放，因为不再使用该页面。通常，此计数应等于物理页在所有页表中出现在<code>UTOP</code>下面的次数<code>UTOP</code>。使用它来跟踪指向页面目录页面的指针的数量，并进而跟踪页面目录对页面表页面的引用的数量。</p>
<p>使用<code>page_alloc</code>时要小心。它返回的页面将始终具有0的引用计数，因此一旦对返回的页面进行了某些操作（例如将其插入到页面表中），则应将pp_ref递增。有时这是由其他函数（例如，<code>page_insert</code>）处理的，有时，调用<code>page_alloc</code>的函数必须直接执行此操作。</p>
<h4 id="页表管理"><a href="#页表管理" class="headerlink" title="页表管理"></a>页表管理</h4><h5 id="exercise-4"><a href="#exercise-4" class="headerlink" title="exercise 4"></a>exercise 4</h5><p>管理页表：插入和删除线性到物理的映射，并在需要时创建页表页面。完成<code>  pgdir_walk(), boot_map_region(),page_lookup(), page_remove(),page_insert()</code>从<code>mem_init()</code>调用的<code>check_page()</code>测试您的页表管理例程。</p>
<p><code>pgdir_walk()</code>给定<code>pgdir</code>（指向页面目录的指针），<code>pgdir_walk</code>返回指向线性地址<code>va</code>的页表条目（<code>PTE</code>）的指针。也就是返回<code>Page Directory</code>的前20位；</p>
<p>这个实在不会，哭。写了两天，没写出来。这个我写的都是错的，看了别人的代码才懂，有点菜。</p>
<p>解读<code>pagdir_walk()</code>一下，给定页表目录地址和虚拟地址，返回页表地址。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pte_t</span> *</span><br><span class="line">pgdir_walk(<span class="keyword">pde_t</span> *pgdir, <span class="keyword">const</span> <span class="keyword">void</span> *va, <span class="keyword">int</span> create)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> dindex = PDX(va);				<span class="comment">// 页表目录中的偏移</span></span><br><span class="line">    <span class="keyword">if</span>(!pgdir[dindex] &amp; PTE_P)&#123;</span><br><span class="line">       <span class="keyword">if</span>(create)&#123;						<span class="comment">// 不存在就建一个页表</span></span><br><span class="line">           <span class="class"><span class="keyword">struct</span> <span class="title">PageInfo</span> *<span class="title">pg</span> =</span> page_alloc(ALLOC_ZERO);</span><br><span class="line">           <span class="keyword">if</span>(!pg) <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">           pg -&gt; pp_ref++;</span><br><span class="line">           pgdir[dindex] = page2pa(pg) | PTE_P | PTE_U | PTE_W;</span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">NULL</span>;					<span class="comment">// 建立失败返回NULL</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">pte_t</span> * p = KADDR(PTE_ADDR(pgdir[dindex]));		<span class="comment">// 页表地址的基地址</span></span><br><span class="line">   <span class="keyword">return</span> p + PTX(va);								<span class="comment">// 页表基地址+页表偏移</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>$$<br>&lt;Empty \space Math \space Block&gt;<br>$$</p>
<p><code>boot_map_region</code>将物理地址映射为实际页表中的地址。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">void</span></span><br><span class="line">boot_map_region(<span class="keyword">pde_t</span> *pgdir, <span class="keyword">uintptr_t</span> va, <span class="keyword">size_t</span> size, <span class="keyword">physaddr_t</span> pa, <span class="keyword">int</span> perm)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">size_t</span> i ;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span> ; i &lt; size; i = i + PGSIZE, va += PGSIZE, pa += PGSIZE)&#123;</span><br><span class="line">        <span class="keyword">pte_t</span> *pte = (<span class="keyword">pte_t</span> *)pgdir_walk(pgdir, (<span class="keyword">void</span> *)va ,  <span class="number">1</span>) ;</span><br><span class="line">        *pte = pa | perm | PTE_P;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<p>这个<code>page_lookup()</code>大部分是我自己写的，但是一直调试失败，然后对比别人的代码，发现了两处错误。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回物理页，参数页目录、虚拟地址</span></span><br><span class="line"><span class="function">struct PageInfo * <span class="title">page_lookup</span><span class="params">(<span class="keyword">pde_t</span> *pgdir, <span class="keyword">void</span> *va, <span class="keyword">pte_t</span> **pte_store)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">pte_t</span>  *pa = (<span class="keyword">pte_t</span> *)pgdir_walk(pgdir, va, <span class="number">0</span>);	<span class="comment">//	得到物理地址</span></span><br><span class="line">    <span class="keyword">if</span> (!pa || !(*pa &amp; PTE_P)) <span class="keyword">return</span> <span class="literal">NULL</span>;	<span class="comment">// 这个我没有想到需要判断一下是否需要使用，PTE_P;</span></span><br><span class="line">    <span class="keyword">if</span>(pte_store)&#123;				<span class="comment">// 这个我是用**pte_store进行判断，不了解**含义</span></span><br><span class="line">        *pte_store = pa;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(*pa)&#123;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">PageInfo</span> * <span class="title">tmp</span>  =</span> pa2page(PTE_ADDR(*pa));	<span class="comment">// 物理地址转换位物理页</span></span><br><span class="line">        <span class="keyword">return</span> tmp;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>page_remove()</code>删除页面，</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 删除物理页地址</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">page_remove</span><span class="params">(<span class="keyword">pde_t</span> *pgdir, <span class="keyword">void</span> *va)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// Fill this function in</span></span><br><span class="line">    <span class="keyword">pte_t</span> *pte;											</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">PageInfo</span> * <span class="title">tmp</span> =</span> page_lookup(pgdir, va, &amp;pte);	<span class="comment">// 查看虚拟地址信息</span></span><br><span class="line">    <span class="keyword">if</span> (!tmp || !(*pte &amp; PTE_P)) <span class="keyword">return</span>;				<span class="comment">// 判断是否存在，不存在的话就不需要删除</span></span><br><span class="line">    page_decref(tmp);								<span class="comment">//	删除引用，如引用为零，则释放地址。   </span></span><br><span class="line">    *pte = <span class="number">0</span>;							<span class="comment">// 释放pte</span></span><br><span class="line">    tlb_invalidate(pgdir, va);			<span class="comment">// 验证地址是否可用</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>page_insert()</code>物理页插入</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将物理页插入</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">page_insert</span><span class="params">(<span class="keyword">pde_t</span> *pgdir, struct PageInfo *pp, <span class="keyword">void</span> *va, <span class="keyword">int</span> perm)</span></span>&#123;    </span><br><span class="line">    <span class="keyword">pte_t</span> *pte = pgdir_walk(pgdir, va, <span class="number">1</span>); 		<span class="comment">// 指向物理地址的页表地址；    </span></span><br><span class="line">    <span class="keyword">if</span> (!pte) 	<span class="comment">//page table not allocated		// 分配失败，返回错误       </span></span><br><span class="line">        <span class="keyword">return</span> -E_NO_MEM;   </span><br><span class="line">    pp -&gt; pp_ref  = pp -&gt; pp_ref + <span class="number">1</span>;			<span class="comment">// 添加页面引用    </span></span><br><span class="line">    pp -&gt; pp_link = <span class="literal">NULL</span>;					<span class="comment">// 将指向下一页的地址设为空    </span></span><br><span class="line">    <span class="keyword">if</span>(*pte &amp; PTE_P)&#123;						<span class="comment">// 是否已经被使用       </span></span><br><span class="line">        page_remove(pgdir, va);    &#125;   </span><br><span class="line">    *pte = page2pa(pp) | perm | PTE_P;		<span class="comment">// 将页面转换物理地址并且存到页表中。	</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="第三部分：内核地址空间"><a href="#第三部分：内核地址空间" class="headerlink" title="第三部分：内核地址空间"></a>第三部分：内核地址空间</h3><p><code>JOS</code>将32位线性地址分为两个部分</p>
<ol>
<li>我在实验3中开始加载和运行的用户环境（进程）将控制下部的布局和内容</li>
<li>内核始终保持对上部的完全控制。分隔线由<code>inc/memlayout.h</code>中的符号<code>ULIM</code>任意定义，为内核保留大约<code>256MB</code>的虚拟地址空间。</li>
</ol>
<h5 id="exercise-5"><a href="#exercise-5" class="headerlink" title="exercise 5"></a>exercise 5</h5><p>在<code>UTOP</code>上方设置地址空间：地址空间的内核部分。</p>
<p>调用<code>check_page（）</code>之后，在<code>mem_init（）</code>中填写缺少的代码。通过<code>check_kern_pgdir()</code>和<code>check_page_installed_pgdi()</code>检查。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将UPAGES映射到pages</span></span><br><span class="line">boot_map_region(kern_pgdir, UPAGES, PTSIZE , PADDR(pages), PTE_U);</span><br><span class="line"><span class="comment">// 将KSTACKTOP映射到bootstack</span></span><br><span class="line">boot_map_region(kern_pgdir, KSTACKTOP - KSTKSIZE, PTSIZE,  PADDR(bootstack), PTE_W);</span><br><span class="line"><span class="comment">// 将[KERNBASE, 2^32)映射到[0, 2^32-KERNBASE)</span></span><br><span class="line">boot_map_region(kern_pgdir, KERNBASE, <span class="number">0xffffffff</span> - KERNBASE , <span class="number">0</span>,  PTE_W);</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiongyujie.github.io/2021/04/13/MIT6.828/04_lab1_3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ava.jpeg">
      <meta itemprop="name" content="玉杰君">
      <meta itemprop="description" content="坚持！坚持！坚持！！！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiongyujie's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/13/MIT6.828/04_lab1_3/" class="post-title-link" itemprop="url">03_lab1_3</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-13 16:35:44" itemprop="dateCreated datePublished" datetime="2021-04-13T16:35:44+08:00">2021-04-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-09 12:52:30" itemprop="dateModified" datetime="2021-05-09T12:52:30+08:00">2021-05-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MIT-OS-6-828/" itemprop="url" rel="index"><span itemprop="name">MIT OS 6.828</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2021/04/13/MIT6.828/04_lab1_3/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2021/04/13/MIT6.828/04_lab1_3/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li><code>x86</code>堆栈指针<code>(esp寄存器)</code>指向堆栈使用的最低区域。栈中压入一个值，则指针向下增长。弹出一个值，指针向上减少。在32位的模式下，栈堆只能保存32位的值，<code>esp</code>总是能被4整除。指令变量能够使用硬指针使用栈指针寄存器。</li>
<li><code>ebp</code>基本指针寄存器通过软件来于栈堆关联。在进入C语言的函数的时候，该函数的前言代码将会被压入栈，栈的信息通过栈顶指针来保存。在运行函数发的过程中，将<code>esp</code>的内容保存到<code>ebp</code>中。</li>
</ol>
<h5 id="训练10"><a href="#训练10" class="headerlink" title="训练10"></a>训练10</h5><p>开始熟悉<code>x86 C</code>语言调用函数，再<code>obj/kern/kernel.asm</code>找到<code>test_backtrace</code>函数，并且再这设置一个断点。当内核每次回调的时候，检测一下发生了什么。每个<code>test_backtrace</code>嵌套调用时，将多少个字压入堆栈。</p>
<p>每次回调都会运行这样一段代码。每次调用之后，<code>esp</code>自动增长<code>0x10=16</code>则压入栈堆的内容为16个字</p>
<p><img src="https://image-1300045024.cos.ap-nanjing.myqcloud.com/img/20210415154811.png" alt="image-20210415154811584"></p>
<p><img src="https://image-1300045024.cos.ap-nanjing.myqcloud.com/img/20210415155243.png" alt="image-20210415155243823"></p>
<p>下面将会使用<code>mon_backtrace</code>，这个方法写入到了<code>kern/moniter.c</code>文件中，找到<code>inc/x86.h下面的read_ebp()</code>。使用这回溯功能打印内存信息。</p>
<p>每一行包括<code>ebp, eip, args</code>，<code>ebp</code>的值指示该函数使用堆栈的基本指针。刚输入函数并且在函数序言代码中设立基本指针，堆栈指针的位置。</p>
<p><code>eip</code>的值返回指令指针：函数返回时将控件返回的地址。返回指令指针通常指向调用指令之后的指令。</p>
<p><code>args</code>之后的几个五个十六进制的数字为函数的前五个参数，这些参数以及被压入堆栈。如果使用少于五个参数调用该函数，则并非所有五个值都有用，如何解决该限制。</p>
<p>第一行打印反应了当前执行的函数，第二行反应了函数的回调，第三行反应了调用该函数的功能。我们应该打印所有未完成的堆栈帧。</p>
<p><img src="https://image-1300045024.cos.ap-nanjing.myqcloud.com/img/20210415162440.png" alt="image-20210415162440912"></p>
<p>这有一些特殊的指针，这些点对于下面的实验和练习有必要学习。</p>
<ol>
<li><code>int *p = (int*)100 =&gt; (int)p+1, (int)(p+1)</code>前者为数相加为101，后者为指针相加为104</li>
<li><code>p[i] = *(p+i)</code></li>
<li><code>&amp;p[i] = (p+i)</code></li>
</ol>
<p>尽管C语言都不需要在指针和整数之间进行强制切换，但是操作系统经常会这样做，每当你看见设计到内存地址的加法时，请确定是指针加法还是整数加法。</p>
<h5 id="训练11："><a href="#训练11：" class="headerlink" title="训练11："></a>训练11：</h5><p>如上述所述实现回溯功能，使用与示例相同的格式，当你认为它正确时，运行<code>make grade</code>查看成绩脚本中的成绩，如果不正确请修正它。提交<code>lab1</code>代码后可以随意提交。</p>
<p>如果使用<code>read_ebp()</code>，GCC可能会生成优化的代码，该代码可能在<code>mon_backtrace()</code>的函数序言之前调用<code>read_ebp()</code>，这会导致堆栈跟踪不准确。</p>
<p>这个看了半天没看懂，参考了一下别人的：<a target="_blank" rel="noopener" href="https://123xzy.github.io/2019/03/14/MIT-6-828-Lab-Booting-a-PC/">https://123xzy.github.io/2019/03/14/MIT-6-828-Lab-Booting-a-PC/</a></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mon_backtrace</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv, struct Trapframe *tf)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        <span class="comment">// Your code here.</span></span><br><span class="line">        <span class="keyword">int</span> j;</span><br><span class="line">        <span class="keyword">uint32_t</span> ebp = read_ebp();</span><br><span class="line">        <span class="keyword">uint32_t</span> eip = *((<span class="keyword">uint32_t</span> *)ebp+<span class="number">1</span>);</span><br><span class="line">        cprintf(<span class="string">&quot;Stack backtrace:\n&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span> ((<span class="keyword">int</span>)ebp != <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">                cprintf(<span class="string">&quot;  ebp 0x%08x eip 0x%08x args&quot;</span>, ebp, eip);</span><br><span class="line">                <span class="keyword">uint32_t</span> *args = (<span class="keyword">uint32_t</span> *)ebp + <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j ++) &#123;</span><br><span class="line">                        cprintf(<span class="string">&quot; %08x&quot;</span>, args[j]);</span><br><span class="line">                &#125;</span><br><span class="line">                cprintf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                eip = ((<span class="keyword">uint32_t</span> *)ebp)[<span class="number">1</span>];</span><br><span class="line">                ebp = ((<span class="keyword">uint32_t</span> *)ebp)[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="训练12"><a href="#训练12" class="headerlink" title="训练12"></a>训练12</h5><p>修改你的栈堆函数信息，用来显示每个<code>eip</code>的函数名称，源文件名，以及与该eip对应的行号。</p>
<ol>
<li>查看文件<code>kern/kernel.ld</code>的<code>__STAB_*</code></li>
<li>运行<code>objdump -h obj/kern.kernel</code></li>
<li>运行<code>objdump -G obj/kern/kernel</code></li>
<li>运行<code>gcc -pipe -nostdinc -O2 -fno-builtin -I. -MD -Wall -Wno-format -DJOS_KERNEL -gstabs -c -S kern/init.c</code></li>
<li>查看引导加载程序是否将符号表加载到内存，作为加载内核二进制文件的一部分</li>
</ol>
<p><img src="https://image-1300045024.cos.ap-nanjing.myqcloud.com/img/20210417224305.png" alt="image-20210417224305077"></p>
<p><img src="C:\Users\xiong\AppData\Roaming\Typora\typora-user-images\image-20210417221535815.png" alt="image-20210417221535815"></p>
<p><img src="https://image-1300045024.cos.ap-nanjing.myqcloud.com/img/20210417221732.png" alt="image-20210417221732695"></p>
<p>从图中可以看出符号表已经加载到了内存。</p>
<p>答应信息代码如下；</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span>	<span class="title">mon_backtrace</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv, struct Trapframe *tf)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// Your code here.</span></span><br><span class="line">	<span class="keyword">int</span> i ;</span><br><span class="line">	<span class="keyword">int</span> j ;</span><br><span class="line">	<span class="keyword">int</span> k = <span class="number">0</span> ;</span><br><span class="line">	<span class="keyword">uint32_t</span> ebp = read_ebp();</span><br><span class="line">	<span class="keyword">uint32_t</span> eip = *((<span class="keyword">uint32_t</span> *)ebp  + <span class="number">1</span>);</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">Eipdebuginfo</span> <span class="title">info</span>;</span></span><br><span class="line">	cprintf(<span class="string">&quot;Stack backtrace:\n&quot;</span>);</span><br><span class="line">	<span class="keyword">while</span>((<span class="keyword">int</span>)ebp != <span class="number">0x0</span> )&#123;</span><br><span class="line">        cprintf(<span class="string">&quot;  ebp %08x eip %08x args&quot;</span>, ebp, eip);</span><br><span class="line">        <span class="keyword">uint32_t</span> *args = (<span class="keyword">uint32_t</span> *)ebp + <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">            cprintf(<span class="string">&quot; %08x&quot;</span>, args[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        cprintf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        debuginfo_eip(eip, &amp;info);</span><br><span class="line">        <span class="keyword">if</span>(k!=<span class="number">0</span>)&#123;</span><br><span class="line">            cprintf(<span class="string">&quot;\t%s:%u: &quot;</span>,info.eip_file, info.eip_line);</span><br><span class="line">            <span class="keyword">for</span>(j = <span class="number">0</span>; info.eip_fn_name[j] != <span class="string">&#x27;:&#x27;</span>; j++)&#123;</span><br><span class="line">                cprintf(<span class="string">&quot;%c&quot;</span>, info.eip_fn_name[j]);</span><br><span class="line">            &#125;</span><br><span class="line">            cprintf(<span class="string">&quot;+%u\n&quot;</span>, info.eip_fn_namelen);</span><br><span class="line">	&#125;</span><br><span class="line">	k++;</span><br><span class="line">	eip = ((<span class="keyword">uint32_t</span> *)ebp)[<span class="number">1</span>];</span><br><span class="line">	ebp = ((<span class="keyword">uint32_t</span> *)ebp)[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="玉杰君"
      src="/images/ava.jpeg">
  <p class="site-author-name" itemprop="name">玉杰君</p>
  <div class="site-description" itemprop="description">坚持！坚持！坚持！！！</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">14</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/yourname" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;yourname" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2020 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">你好</span>
</div>
  <div class="powered-by">无人驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://xiongyujie.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
